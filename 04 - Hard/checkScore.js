const checkScore = (str) => {
  const symbolValues = {
    '#': 5,
    O: 3,
    X: 1,
    '!': -1,
    '!!': -3,
    '!!!': -5,
  };

  let sum = 0;

  for (let i = 0; i < str.length; i++) {
    sum += str[i].reduce((acc, cv) => acc + (symbolValues[cv] || 1), 0);
  }

  return sum < 0 ? 0 : sum;
};

// Tests

console.log(
  checkScore([
    [
      '#',
      '!',
      'O',
      '!!',
      '#',
      '!!',
      '!!',
      'X',
      '!',
      'X',
      '!!!',
      '!!!',
      'X',
      '#',
    ],
    [
      '!',
      '#',
      '!!',
      '!!!',
      'X',
      'X',
      '#',
      '!!',
      'O',
      '!!!',
      '!',
      '!!!',
      '#',
      'O',
    ],
    [
      'O',
      'X',
      '!!!',
      '#',
      '!!!',
      '!',
      '!',
      '!',
      '#',
      '!!',
      '!!!',
      'X',
      '!',
      'X',
    ],
    [
      '#',
      '!!',
      '!!',
      '#',
      'O',
      '!',
      'X',
      'X',
      '!!!',
      '#',
      '#',
      '!!!',
      '#',
      '!',
    ],
    ['#', 'O', 'X', 'X', '!!', '#', 'O', 'X', '#', '!', '!', '!', 'O', '#'],
    [
      'X',
      '!',
      'X',
      'O',
      '!',
      '!',
      '!!',
      '!!',
      '!!',
      '!!',
      '!!!',
      '!!!',
      '!',
      'X',
    ],
    ['!!!', '!', '!!', 'O', '!!!', 'X', '#', '#', 'X', 'X', '!', '!', 'X', '!'],
    [
      '!!!',
      'O',
      '!!!',
      '!!!',
      'O',
      '#',
      '!!',
      '!!!',
      '!',
      '!!!',
      'O',
      'O',
      'X',
      '!!!',
    ],
    ['!!', 'X', 'O', '!!!', '!!', 'O', '#', 'X', 'O', 'X', '!!', 'X', '#', '!'],
    [
      'X',
      '#',
      '!!!',
      '!!!',
      '!!',
      '#',
      '!',
      '!!',
      'O',
      '!',
      'O',
      '#',
      '!!!',
      '#',
    ],
    [
      '!',
      '#',
      '!',
      '!!!',
      '!!!',
      'X',
      '!',
      'X',
      '#',
      '!!',
      '!',
      '!!',
      'X',
      '!!!',
    ],
    [
      '!!!',
      '#',
      '#',
      '!!',
      'O',
      '!!',
      '#',
      '!!!',
      '#',
      '#',
      '!!',
      '#',
      '!',
      'O',
    ],
    ['!!!', 'X', 'O', '!!', 'X', '!', 'O', 'X', 'O', '!!!', '#', '#', '#', '#'],
    [
      'X',
      'X',
      '!!!',
      '!!',
      'O',
      '#',
      'O',
      '#',
      'X',
      'X',
      'X',
      '!!!',
      '!',
      '!!!',
    ],
  ]),
  32
);
